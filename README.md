유튜브 영상 : https://youtu.be/xyVCujzZKqc



회로도 : https://www.tinkercad.com/things/4AYjenSZ41s/editel

![image](https://github.com/user-attachments/assets/7b48dc20-70f4-4a07-9518-4da79ef6f99e)




# Arduino와 p5.js를 활용한 LED 제어

이 프로젝트는 Arduino와 p5.js를 사용하여 신호등LED 제어 및 시리얼 통신을 처리하여 LED의 지속시간을 설정하는 시스템입니다. 이를 통해 신호등을 시뮬레이션하며, 버튼을 눌렀을 때 특정 동작을 실행하고, p5.js를 통해 LED의 지속 시간을 조절하거나 모드를 확인하는등 다양한 동작을 확인할 수 있습니다.

## 신호등의 기본 동작

이 시스템은 **신호등**처럼 동작하는 3개의 LED를 제어합니다. 각 LED는 빨간색, 노란색, 초록색을 나타내며, 각각은 버튼을 눌렀을 때 특정 상태로 변경됩니다.

### 1. **기본 동작**
- **초록 LED**는 2초 동작후 꺼집니다.
- **노란 LED**는 0.5초 동작후 꺼집니다. 후에 초록불이 3번 깜빡인 후에 다시 동작합니다.
- **빨강 LED**는 2초 동작 후에 노란불이 켜지도록 합니다.

### 2. **버튼을 눌렀을 때의 변화**
### 버튼 기능 설명

| 버튼 번호 | 기능              | 설명                                          |
|-----------|-------------------|---------------------------------------------|
| **버튼 1** | 비상 버튼 (Emergency) | 눌렀을 때 모든 LED가 꺼지고 빨강LED만 점등합니다. |
| **버튼 2** | 전체 깜빡임 (Blinking) | 눌렀을 때 모든 LED가 0.5초 간격으로 깜빡입니다. |
| **버튼 3** | 온/오프 기능 (On/Off) | 눌렀을 때 모든 LED가 켜지거나 꺼집니다. |


## p5.js로 조작 가능한 부분

### 1. **LED 지속 시간 조정**
p5.js에서는 각 LED에 대한 지속 시간을 **슬라이더**로 조정할 수 있습니다. 슬라이더를 사용하여 각 LED의 지속 시간을 실시간으로 조정할 수 있으며, 이를 Arduino에 전달하면 Arduino가 해당 LED의 지속 시간을 반영하여 색상 지속시간 상태를 변경합니다.

### 2. **실시간 LED 상태 표시**
p5.js는 Arduino에서 받은 데이터를 기반으로 현재 활성화된 LED의 상태를 화면에 표시합니다. 화면에 나타나는 LED는 빨간, 노란, 초록 LED의 색상을 각각 나타내며, p5.js에서 실시간으로 변경됩니다.


## p5.js에서 아두이노 조작 방법

### 1. **시리얼 통신을 통한 제어**
p5.js는 **시리얼 통신**을 통해 Arduino와 데이터를 주고받습니다. 이를 통해 p5.js는 Arduino에서 보내는 데이터를 받아서 화면에 표시하며, 슬라이더에서 입력한 값을 Arduino로 전송하여 LED의 지속 시간을 조정합니다.

### 2. **p5.js의 `serial` 객체 사용**
- p5.js에서는 `serial` 객체를 사용하여 Arduino와 연결합니다.
- `serial.list()`로 연결 가능한 시리얼 포트를 확인하고, `serial.open()`을 통해 연결합니다.
- 시리얼 포트가 열리면, p5.js는 `serial.write()`를 사용하여 데이터를 Arduino로 전송하고, `serial.on('data', callback)`을 사용하여 Arduino로부터 받은 데이터를 처리합니다.

### 3. **슬라이더 값 전송**
p5.js에서 제공하는 슬라이더를 사용하여 각 LED의 지속 시간을 조절할 수 있습니다. 슬라이더의 값은 실시간으로 Arduino로 전송되며, Arduino는 해당 값을 받아 LED의 지속 시간을 반영합니다. 예를 들어, 슬라이더를 움직여 빨간 LED의 지속 시간을 설정하면 Arduino가 그 값에 맞게 빨간 LED를 제어합니다.

코드부분은 task를 LED 별로 나누어 task를 할당하였고 이를 통하여 web p5 에서도 조절 가능하도록 하였습니다. 
serial통신을 사용하여 0.1초 간격으로 통신 하도록 만들었으며 현재 상태를 그대로 p5 화면에 반영할 수 있도록 하였습니다.
